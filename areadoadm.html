<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√Årea do Administrador - Cooltive Sa√∫de</title>
    <link rel="stylesheet" href="areadoadm.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-container">
            <div class="logo">
                <img src="./Imagens/logo.png" alt="Cooltive Sa√∫de" width="140" height="40">
            </div>
            <div class="user-profile">
                <div class="user-info">
                    <span class="user-name">Ol√°, Administrador</span>
                    <span class="user-plan">Acesso Total</span>
                </div>
                <a href="index.html" class="btn btn-logout" id="logoutBtn">Sair</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <section class="welcome-section">
                <h1>Painel de Administra√ß√£o</h1>
                <p>Gerencie clientes e acompanhe o desempenho do neg√≥cio</p>
            </section>

            <!-- Dashboard Section -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>Dashboard</h2>
                </div>
                <div class="dashboard-cards">
                    <!-- Clients Card -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Clientes Ativos</h3>
                        </div>
                        <div class="card-content">
                            <div class="stats-value" id="activeClientsCount">0</div>
                            <div class="stats-info">
                                <span class="stats-trend positive" id="clientsTrend">+0%</span>
                            </div>
                            <div class="stats-detail">
                                <div class="detail-item">
                                    <span class="detail-label">Novos este m√™s:</span>
                                    <span class="detail-value" id="newClientsThisMonth">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lists Section -->
            <section class="lists-section">
                <div class="lists-buttons">
                    <button id="cadastrarClienteBtn" class="btn btn-list">
                        <span class="list-icon">üë§</span>
                        <div class="list-info">
                            <span class="list-title">Cadastrar um Cliente</span>
                            <span class="list-desc">Adicione um novo cliente ao sistema</span>
                        </div>
                    </button>
                    <button id="clientListBtn" class="btn btn-list">
                        <span class="list-icon">üë•</span>
                        <div class="list-info">
                            <span class="list-title">Lista de Clientes</span>
                            <span class="list-desc">Visualize todos os clientes cadastrados</span>
                        </div>
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2025 Cooltive Sa√∫de. Todos os direitos reservados.</p>
                <div class="footer-links">
                    <a href="#">Termos de uso</a>
                    <a href="#">Pol√≠tica de privacidade</a>
                    <a href="#">Suporte</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Register Client Modal -->
    <div id="registerClientModal" class="modal">
        <div class="modal-content register-modal">
            <span class="close-modal" data-modal="registerClientModal">&times;</span>
            <h2>Cadastrar Novo Cliente</h2>
            <form id="registerClientForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Tipo de Cadastro</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="clientType" value="titular" checked> Titular
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="clientType" value="dependente"> Dependente
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="fullName">Nome Completo</label>
                        <input type="text" id="fullName" name="fullName" placeholder="Digite o nome completo" required>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="cpf">CPF</label>
                        <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" required>
                    </div>
                    <div class="form-group">
                        <label for="birthDate">Data de Nascimento</label>
                        <input type="date" id="birthDate" name="birthDate" required>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="email">E-mail</label>
                        <input type="email" id="email" name="email" placeholder="email@exemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Telefone</label>
                        <input type="tel" id="phone" name="phone" placeholder="(00) 00000-0000" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="address">Endere√ßo Completo</label>
                        <input type="text" id="address" name="address" placeholder="Rua, n√∫mero, complemento" required>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="city">Cidade</label>
                        <input type="text" id="city" name="city" placeholder="Sua cidade" required>
                    </div>
                    <div class="form-group">
                        <label for="state">Estado</label>
                        <select id="state" name="state" required>
                            <option value="">Selecione</option>
                            <option value="AC">Acre</option>
                            <option value="AL">Alagoas</option>
                            <option value="AP">Amap√°</option>
                            <option value="AM">Amazonas</option>
                            <option value="BA">Bahia</option>
                            <option value="CE">Cear√°</option>
                            <option value="DF">Distrito Federal</option>
                            <option value="ES">Esp√≠rito Santo</option>
                            <option value="GO">Goi√°s</option>
                            <option value="MA">Maranh√£o</option>
                            <option value="MT">Mato Grosso</option>
                            <option value="MS">Mato Grosso do Sul</option>
                            <option value="MG">Minas Gerais</option>
                            <option value="PA">Par√°</option>
                            <option value="PB">Para√≠ba</option>
                            <option value="PR">Paran√°</option>
                            <option value="PE">Pernambuco</option>
                            <option value="PI">Piau√≠</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="RN">Rio Grande do Norte</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="RO">Rond√¥nia</option>
                            <option value="RR">Roraima</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="SP">S√£o Paulo</option>
                            <option value="SE">Sergipe</option>
                            <option value="TO">Tocantins</option>
                        </select>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="planType">Tipo de Plano</label>
                        <select id="planType" name="planType" required>
                            <option value="">Selecione</option>
                            <option value="individual">Individual (R$ 89,99/m√™s)</option>
                            <option value="family">Fam√≠lia (R$ 149,99/m√™s)</option>
                            <option value="individual-psychology">Individual + Psicologia (R$ 139,98/m√™s)</option>
                            <option value="family-psychology">Fam√≠lia + Psicologia (R$ 199,98/m√™s)</option>
                            <option value="empresarial">Empresarial</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="paymentType">Tipo de Pagamento</label>
                        <select id="paymentType" name="paymentType" required>
                            <option value="">Selecione</option>
                            <option value="consultation">Consulta (pagamento √∫nico)</option>
                            <option value="recurrence">Recorr√™ncia (assinatura mensal)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" name="status" required>
                            <option value="active">Ativo</option>
                            <option value="inactive">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-full">Cadastrar Cliente</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Client Modal -->
    <div id="editClientModal" class="modal">
        <div class="modal-content register-modal">
            <span class="close-modal" data-modal="editClientModal">&times;</span>
            <h2>Editar Cliente</h2>
            <form id="editClientForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Tipo de Cadastro</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="editClientType" value="titular" checked> Titular
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="editClientType" value="dependente"> Dependente
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editFullName">Nome Completo</label>
                        <input type="text" id="editFullName" name="editFullName" placeholder="Digite o nome completo" required>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="editCpf">CPF</label>
                        <input type="text" id="editCpf" name="editCpf" placeholder="000.000.000-00" required>
                    </div>
                    <div class="form-group">
                        <label for="editBirthDate">Data de Nascimento</label>
                        <input type="date" id="editBirthDate" name="editBirthDate" required>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="editEmail">E-mail</label>
                        <input type="email" id="editEmail" name="editEmail" placeholder="email@exemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label for="editPhone">Telefone</label>
                        <input type="tel" id="editPhone" name="editPhone" placeholder="(00) 00000-0000" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editAddress">Endere√ßo Completo</label>
                        <input type="text" id="editAddress" name="editAddress" placeholder="Rua, n√∫mero, complemento" required>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="editCity">Cidade</label>
                        <input type="text" id="editCity" name="editCity" placeholder="Sua cidade" required>
                    </div>
                    <div class="form-group">
                        <label for="editState">Estado</label>
                        <select id="editState" name="editState" required>
                            <option value="">Selecione</option>
                            <option value="AC">Acre</option>
                            <option value="AL">Alagoas</option>
                            <option value="AP">Amap√°</option>
                            <option value="AM">Amazonas</option>
                            <option value="BA">Bahia</option>
                            <option value="CE">Cear√°</option>
                            <option value="DF">Distrito Federal</option>
                            <option value="ES">Esp√≠rito Santo</option>
                            <option value="GO">Goi√°s</option>
                            <option value="MA">Maranh√£o</option>
                            <option value="MT">Mato Grosso</option>
                            <option value="MS">Mato Grosso do Sul</option>
                            <option value="MG">Minas Gerais</option>
                            <option value="PA">Par√°</option>
                            <option value="PB">Para√≠ba</option>
                            <option value="PR">Paran√°</option>
                            <option value="PE">Pernambuco</option>
                            <option value="PI">Piau√≠</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="RN">Rio Grande do Norte</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="RO">Rond√¥nia</option>
                            <option value="RR">Roraima</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="SP">S√£o Paulo</option>
                            <option value="SE">Sergipe</option>
                            <option value="TO">Tocantins</option>
                        </select>
                    </div>
                </div>

                <div class="form-row two-columns">
                    <div class="form-group">
                        <label for="editPlanType">Tipo de Plano</label>
                        <select id="editPlanType" name="editPlanType" required>
                            <option value="">Selecione</option>
                            <option value="individual">Individual (R$ 89,99/m√™s)</option>
                            <option value="family">Fam√≠lia (R$ 149,99/m√™s)</option>
                            <option value="individual-psychology">Individual + Psicologia (R$ 139,98/m√™s)</option>
                            <option value="family-psychology">Fam√≠lia + Psicologia (R$ 199,98/m√™s)</option>
                            <option value="empresarial">Empresarial</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPaymentType">Tipo de Pagamento</label>
                        <select id="editPaymentType" name="editPaymentType" required>
                            <option value="">Selecione</option>
                            <option value="consultation">Consulta (pagamento √∫nico)</option>
                            <option value="recurrence">Recorr√™ncia (assinatura mensal)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editStatus">Status</label>
                        <select id="editStatus" name="editStatus" required>
                            <option value="active">Ativo</option>
                            <option value="inactive">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-full">Salvar Altera√ß√µes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="modal">
        <div class="modal-content confirm-modal">
            <span class="close-modal" data-modal="deleteConfirmModal">&times;</span>
            <h2>Confirmar Exclus√£o</h2>
            <p>Voc√™ tem certeza que deseja excluir este cliente?</p>
            <div class="confirm-actions">
                <button id="cancelDeleteBtn" class="btn btn-outline">Cancelar</button>
                <button id="confirmDeleteBtn" class="btn btn-danger">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Client List Modal -->
    <div id="clientListModal" class="modal">
        <div class="modal-content client-list-modal">
            <span class="close-modal" data-modal="clientListModal">&times;</span>
            <h2>Lista de Clientes</h2>
            <div class="search-bar">
                <input type="text" id="clientSearch" placeholder="Buscar cliente...">
            </div>
            <div class="client-list">
                <table>
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>CPF</th>
                            <th>Plano</th>
                            <th>Status</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="clientTableBody">
                        <!-- Tabela vazia inicialmente -->
                    </tbody>
                </table>
            </div>
            <div class="pagination">
                <button class="pagination-btn" id="prevPageBtn">Anterior</button>
                <span class="pagination-info" id="paginationInfo">P√°gina 1 de 1</span>
                <button class="pagination-btn" id="nextPageBtn">Pr√≥xima</button>
            </div>
        </div>
    </div>

    <!-- Credentials Modal -->
    <div id="credentialsModal" class="modal">
        <div class="modal-content confirm-modal">
            <span class="close-modal" data-modal="credentialsModal">&times;</span>
            <h2>Credenciais de Acesso</h2>
            <p>O cliente foi cadastrado com sucesso! As credenciais de acesso s√£o:</p>
            <div class="credentials-info">
                <p><strong>Login:</strong> <span id="clientLogin"></span></p>
                <p><strong>Senha:</strong> <span id="clientPassword"></span></p>
            </div>
            <div class="confirm-actions">
                <button id="closeCredentialsBtn" class="btn btn-primary">Fechar</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar se o usu√°rio est√° logado
            if (!localStorage.getItem('loggedIn')) {
                window.location.href = 'index.html';
                return;
            }

            // Elementos
            const modals = {
                registerClient: document.getElementById('registerClientModal'),
                clientList: document.getElementById('clientListModal'),
                editClient: document.getElementById('editClientModal'),
                deleteConfirm: document.getElementById('deleteConfirmModal'),
                credentials: document.getElementById('credentialsModal')
            };
            
            const buttons = {
                cadastrarCliente: document.getElementById('cadastrarClienteBtn'),
                clientList: document.getElementById('clientListBtn'),
                cancelDelete: document.getElementById('cancelDeleteBtn'),
                confirmDelete: document.getElementById('confirmDeleteBtn'),
                prevPage: document.getElementById('prevPageBtn'),
                nextPage: document.getElementById('nextPageBtn'),
                closeCredentials: document.getElementById('closeCredentialsBtn'),
                logout: document.getElementById('logoutBtn')
            };
            
            const forms = {
                registerClient: document.getElementById('registerClientForm'),
                editClient: document.getElementById('editClientForm')
            };
            
            const inputs = {
                cpf: document.getElementById('cpf'),
                phone: document.getElementById('phone'),
                editCpf: document.getElementById('editCpf'),
                editPhone: document.getElementById('editPhone'),
                clientSearch: document.getElementById('clientSearch')
            };

            const elements = {
                clientTableBody: document.getElementById('clientTableBody'),
                paginationInfo: document.getElementById('paginationInfo'),
                activeClientsCount: document.getElementById('activeClientsCount'),
                clientsTrend: document.getElementById('clientsTrend'),
                newClientsThisMonth: document.getElementById('newClientsThisMonth'),
                clientLogin: document.getElementById('clientLogin'),
                clientPassword: document.getElementById('clientPassword')
            };
            
            // Cliente atual sendo editado ou exclu√≠do
            let currentClientId = null;
            
            // Configura√ß√µes de pagina√ß√£o
            const pagination = {
                currentPage: 1,
                itemsPerPage: 5,
                totalPages: 1
            };

            // Array para armazenar os clientes
            let clients = [];
            
            // Carregar clientes do localStorage
            function loadClients() {
                const storedClients = localStorage.getItem('clients');
                if (storedClients) {
                    clients = JSON.parse(storedClients);
                }
                updateDashboard();
                renderClientTable();
            }
            
            // Salvar clientes no localStorage
            function saveClients() {
                localStorage.setItem('clients', JSON.stringify(clients));
                updateDashboard();
            }
            
            // Atualizar o dashboard
            function updateDashboard() {
                const now = new Date();
                const currentMonth = now.getMonth();
                const currentYear = now.getFullYear();
                
                // Contar clientes ativos
                const activeClients = clients.filter(client => client.status === 'active');
                elements.activeClientsCount.textContent = activeClients.length;
                
                // Contar novos clientes este m√™s
                const newClientsThisMonth = clients.filter(client => {
                    const createdDate = new Date(client.createdAt);
                    return createdDate.getMonth() === currentMonth && 
                           createdDate.getFullYear() === currentYear;
                });
                elements.newClientsThisMonth.textContent = newClientsThisMonth.length;
                
                // Calcular tend√™ncia (compara√ß√£o com o m√™s anterior)
                const lastMonth = currentMonth === 0 ? 11 : currentMonth - 1;
                const lastMonthYear = currentMonth === 0 ? currentYear - 1 : currentYear;
                
                const lastMonthClients = clients.filter(client => {
                    const createdDate = new Date(client.createdAt);
                    return createdDate.getMonth() === lastMonth && 
                           createdDate.getFullYear() === lastMonthYear;
                });
                
                let trendPercentage = 0;
                if (lastMonthClients.length > 0) {
                    trendPercentage = Math.round(((newClientsThisMonth.length - lastMonthClients.length) / lastMonthClients.length) * 100);
                } else if (newClientsThisMonth.length > 0) {
                    trendPercentage = 100; // Se n√£o havia clientes no m√™s anterior
                }
                
                elements.clientsTrend.textContent = `${trendPercentage >= 0 ? '+' : ''}${trendPercentage}%`;
                elements.clientsTrend.className = `stats-trend ${trendPercentage >= 0 ? 'positive' : 'negative'}`;
            }
            
            // Renderizar a tabela de clientes
            function renderClientTable() {
                // Limpar a tabela
                elements.clientTableBody.innerHTML = '';
                
                // Filtrar clientes com base na pesquisa
                const searchValue = inputs.clientSearch ? inputs.clientSearch.value.toLowerCase() : '';
                const filteredClients = clients.filter(client => {
                    return client.name.toLowerCase().includes(searchValue) || 
                           client.cpf.toLowerCase().includes(searchValue) || 
                           getPlanText(client.planType).toLowerCase().includes(searchValue);
                });
                
                // Calcular pagina√ß√£o
                pagination.totalPages = Math.ceil(filteredClients.length / pagination.itemsPerPage);
                if (pagination.totalPages === 0) pagination.totalPages = 1;
                if (pagination.currentPage > pagination.totalPages) pagination.currentPage = pagination.totalPages;
                
                // Atualizar informa√ß√µes de pagina√ß√£o
                elements.paginationInfo.textContent = `P√°gina ${pagination.currentPage} de ${pagination.totalPages}`;
                
                // Habilitar/desabilitar bot√µes de pagina√ß√£o
                buttons.prevPage.disabled = pagination.currentPage === 1;
                buttons.nextPage.disabled = pagination.currentPage === pagination.totalPages;
                
                // Calcular √≠ndices de in√≠cio e fim para a p√°gina atual
                const startIndex = (pagination.currentPage - 1) * pagination.itemsPerPage;
                const endIndex = Math.min(startIndex + pagination.itemsPerPage, filteredClients.length);
                
                // Renderizar clientes da p√°gina atual
                for (let i = startIndex; i < endIndex; i++) {
                    const client = filteredClients[i];
                    const row = document.createElement('tr');
                    row.setAttribute('data-id', client.id);
                    
                    row.innerHTML = `
                        <td>${client.name}</td>
                        <td>${client.cpf}</td>
                        <td>${getPlanText(client.planType)}</td>
                        <td><span class="status-badge ${client.status}">${getStatusText(client.status)}</span></td>
                        <td>
                            <button class="action-btn edit-btn">Editar</button>
                            <button class="action-btn delete-btn">Excluir</button>
                        </td>
                    `;
                    
                    elements.clientTableBody.appendChild(row);
                }
                
                // Configurar bot√µes de a√ß√£o
                setupActionButtons();
            }
            
            // Obter texto do plano com base no valor
            function getPlanText(planType) {
                switch (planType) {
                    case 'individual': return 'Individual';
                    case 'family': return 'Fam√≠lia';
                    case 'individual-psychology': return 'Individual + Psicologia';
                    case 'family-psychology': return 'Fam√≠lia + Psicologia';
                    case 'empresarial': return 'Empresarial';
                    default: return 'Desconhecido';
                }
            }
            
            // Obter texto do status com base no valor
            function getStatusText(status) {
                switch (status) {
                    case 'active': return 'Ativo';
                    case 'inactive': return 'Inativo';
                    default: return 'Desconhecido';
                }
            }
            
            // Fun√ß√£o para abrir um modal
            function openModal(modal) {
                if (modal) {
                    // Fechar todos os outros modais primeiro
                    Object.values(modals).forEach(m => {
                        if (m && m !== modal) {
                            m.style.display = 'none';
                        }
                    });
                    
                    // Abrir o modal solicitado
                    modal.style.display = 'block';
                    
                    // Se for o modal de lista de clientes, atualizar a tabela
                    if (modal === modals.clientList) {
                        renderClientTable();
                    }
                }
            }
            
            // Fun√ß√£o para fechar um modal
            function closeModal(modal) {
                if (modal) {
                    modal.style.display = 'none';
                }
            }
            
            // Fun√ß√£o para fechar todos os modais
            function closeAllModals() {
                Object.values(modals).forEach(modal => {
                    if (modal) {
                        modal.style.display = 'none';
                    }
                });
            }
            
            // Configurar bot√µes de a√ß√£o (editar e excluir)
            function setupActionButtons() {
                // Configurar bot√µes de editar
                document.querySelectorAll('.edit-btn').forEach(button => {
                    button.onclick = function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const row = this.closest('tr');
                        currentClientId = row.getAttribute('data-id');
                        
                        // Encontrar o cliente pelo ID
                        const client = clients.find(c => c.id === currentClientId);
                        if (!client) return;
                        
                        // Preencher o formul√°rio de edi√ß√£o
                        document.getElementById('editFullName').value = client.name;
                        document.getElementById('editCpf').value = client.cpf;
                        document.getElementById('editBirthDate').value = client.birthDate;
                        document.getElementById('editEmail').value = client.email;
                        document.getElementById('editPhone').value = client.phone;
                        document.getElementById('editAddress').value = client.address;
                        document.getElementById('editCity').value = client.city;
                        document.getElementById('editState').value = client.state;
                        document.getElementById('editPlanType').value = client.planType;
                        document.getElementById('editPaymentType').value = client.paymentType;
                        document.getElementById('editStatus').value = client.status;
                        
                        // Definir o tipo de cliente (titular ou dependente)
                        const radioButtons = document.getElementsByName('editClientType');
                        for (let i = 0; i < radioButtons.length; i++) {
                            if (radioButtons[i].value === client.clientType) {
                                radioButtons[i].checked = true;
                                break;
                            }
                        }
                        
                        // Abrir o modal de edi√ß√£o
                        openModal(modals.editClient);
                        return false;
                    };
                });
                
                // Configurar bot√µes de excluir
                document.querySelectorAll('.delete-btn').forEach(button => {
                    button.onclick = function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const row = this.closest('tr');
                        currentClientId = row.getAttribute('data-id');
                        
                        // Abrir o modal de confirma√ß√£o de exclus√£o
                        openModal(modals.deleteConfirm);
                        return false;
                    };
                });
            }
            
            // Formatar CPF
            function formatCPF(input) {
                if (!input) return;
                let value = input.value.replace(/\D/g, '');
                
                if (value.length > 11) {
                    value = value.slice(0, 11);
                }
                
                if (value.length > 9) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{3})(\d{2}).*/, '$1.$2.$3-$4');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{0,3}).*/, '$1.$2.$3');
                } else if (value.length > 3) {
                    value = value.replace(/^(\d{3})(\d{0,3}).*/, '$1.$2');
                }
                
                input.value = value;
                return value;
            }
            
            // Formatar telefone
            function formatPhone(input) {
                if (!input) return;
                let value = input.value.replace(/\D/g, '');
                
                if (value.length > 11) {
                    value = value.slice(0, 11);
                }
                
                if (value.length > 10) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{2})(\d{4})(\d{0,4}).*/, '($1) $2-$3');
                } else if (value.length > 2) {
                    value = value.replace(/^(\d{2})(\d{0,5}).*/, '($1) $2');
                }
                
                input.value = value;
                return value;
            }
            
            // Gerar ID √∫nico
            function generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
            }
            
            // Extrair n√∫meros do CPF
            function extractNumbers(cpf) {
                return cpf.replace(/\D/g, '');
            }
            
            // Gerar credenciais de acesso
            function generateCredentials(cpf) {
                const numericCpf = extractNumbers(cpf);
                const login = numericCpf;
                const password = numericCpf.substring(0, 5);
                
                return { login, password };
            }
            
            // Aplicar formatadores
            if (inputs.cpf) inputs.cpf.addEventListener('input', function() { formatCPF(this); });
            if (inputs.phone) inputs.phone.addEventListener('input', function() { formatPhone(this); });
            if (inputs.editCpf) inputs.editCpf.addEventListener('input', function() { formatCPF(this); });
            if (inputs.editPhone) inputs.editPhone.addEventListener('input', function() { formatPhone(this); });
            
            // Pesquisa de cliente
            if (inputs.clientSearch) {
                inputs.clientSearch.addEventListener('input', function() {
                    pagination.currentPage = 1; // Voltar para a primeira p√°gina ao pesquisar
                    renderClientTable();
                });
            }
            
            // Event Listeners para bot√µes principais
            if (buttons.cadastrarCliente) {
                buttons.cadastrarCliente.addEventListener('click', function() {
                    openModal(modals.registerClient);
                });
            }
            
            if (buttons.clientList) {
                buttons.clientList.addEventListener('click', function() {
                    openModal(modals.clientList);
                });
            }
            
            // Event Listeners para bot√µes de pagina√ß√£o
            if (buttons.prevPage) {
                buttons.prevPage.addEventListener('click', function() {
                    if (pagination.currentPage > 1) {
                        pagination.currentPage--;
                        renderClientTable();
                    }
                });
            }
            
            if (buttons.nextPage) {
                buttons.nextPage.addEventListener('click', function() {
                    if (pagination.currentPage < pagination.totalPages) {
                        pagination.currentPage++;
                        renderClientTable();
                    }
                });
            }
            
            // Event Listeners para bot√µes de cancelar e confirmar exclus√£o
            if (buttons.cancelDelete) {
                buttons.cancelDelete.addEventListener('click', function() {
                    closeModal(modals.deleteConfirm);
                    currentClientId = null;
                });
            }
            
            if (buttons.confirmDelete) {
                buttons.confirmDelete.addEventListener('click', function() {
                    if (currentClientId) {
                        // Encontrar o √≠ndice do cliente no array
                        const index = clients.findIndex(client => client.id === currentClientId);
                        if (index !== -1) {
                            // Remover o cliente do array
                            clients.splice(index, 1);
                            // Salvar no localStorage
                            saveClients();
                            // Atualizar a tabela
                            renderClientTable();
                        }
                    }
                    
                    // Fechar o modal e redefinir o ID do cliente atual
                    closeModal(modals.deleteConfirm);
                    currentClientId = null;
                    
                    // Mostrar mensagem de sucesso
                    alert('Cliente exclu√≠do com sucesso!');
                });
            }
            
            // Event Listener para fechar o modal de credenciais
            if (buttons.closeCredentials) {
                buttons.closeCredentials.addEventListener('click', function() {
                    closeModal(modals.credentials);
                });
            }
            
            // Event Listener para logout
            if (buttons.logout) {
                buttons.logout.addEventListener('click', function() {
                    localStorage.removeItem('loggedIn');
                    window.location.href = 'index.html';
                });
            }
            
            // Event Listeners para bot√µes de fechar modais
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    const modalId = this.getAttribute('data-modal');
                    closeModal(document.getElementById(modalId));
                });
            });
            
            // Event Listeners para cliques fora dos modais
            window.addEventListener('click', function(event) {
                Object.values(modals).forEach(modal => {
                    if (event.target === modal) {
                        closeModal(modal);
                    }
                });
            });
            
            // Submiss√µes de formul√°rios
            if (forms.registerClient) {
                forms.registerClient.addEventListener('submit', function(event) {
                    event.preventDefault();
                    
                    // Obter valores do formul√°rio
                    const clientType = document.querySelector('input[name="clientType"]:checked').value;
                    const name = document.getElementById('fullName').value;
                    const cpf = document.getElementById('cpf').value;
                    const birthDate = document.getElementById('birthDate').value;
                    const email = document.getElementById('email').value;
                    const phone = document.getElementById('phone').value;
                    const address = document.getElementById('address').value;
                    const city = document.getElementById('city').value;
                    const state = document.getElementById('state').value;
                    const planType = document.getElementById('planType').value;
                    const paymentType = document.getElementById('paymentType').value;
                    const status = document.getElementById('status').value;
                    
                    // Gerar credenciais
                    const credentials = generateCredentials(cpf);
                    
                    // Criar objeto de cliente
                    const newClient = {
                        id: generateId(),
                        clientType,
                        name,
                        cpf,
                        birthDate,
                        email,
                        phone,
                        address,
                        city,
                        state,
                        planType,
                        paymentType,
                        status,
                        createdAt: new Date().toISOString(),
                        login: credentials.login,
                        password: credentials.password
                    };
                    
                    // Adicionar cliente ao array
                    clients.push(newClient);
                    
                    // Salvar no localStorage
                    saveClients();
                    
                    // Mostrar credenciais
                    elements.clientLogin.textContent = credentials.login;
                    elements.clientPassword.textContent = credentials.password;
                    
                    // Fechar o modal de cadastro e abrir o modal de credenciais
                    closeModal(modals.registerClient);
                    openModal(modals.credentials);
                    
                    // Limpar o formul√°rio
                    this.reset();
                });
            }
            
            if (forms.editClient) {
                forms.editClient.addEventListener('submit', function(event) {
                    event.preventDefault();
                    
                    if (!currentClientId) return;
                    
                    // Encontrar o cliente pelo ID
                    const index = clients.findIndex(client => client.id === currentClientId);
                    if (index === -1) return;
                    
                    // Obter valores do formul√°rio
                    const clientType = document.querySelector('input[name="editClientType"]:checked').value;
                    const name = document.getElementById('editFullName').value;
                    const cpf = document.getElementById('editCpf').value;
                    const birthDate = document.getElementById('editBirthDate').value;
                    const email = document.getElementById('editEmail').value;
                    const phone = document.getElementById('editPhone').value;
                    const address = document.getElementById('editAddress').value;
                    const city = document.getElementById('editCity').value;
                    const state = document.getElementById('editState').value;
                    const planType = document.getElementById('editPlanType').value;
                    const paymentType = document.getElementById('editPaymentType').value;
                    const status = document.getElementById('editStatus').value;
                    
                    // Atualizar o cliente
                    clients[index] = {
                        ...clients[index],
                        clientType,
                        name,
                        cpf,
                        birthDate,
                        email,
                        phone,
                        address,
                        city,
                        state,
                        planType,
                        paymentType,
                        status
                    };
                    
                    // Salvar no localStorage
                    saveClients();
                    
                    // Atualizar a tabela
                    renderClientTable();
                    
                    // Fechar o modal
                    closeModal(modals.editClient);
                    currentClientId = null;
                    
                    // Mostrar mensagem de sucesso
                    alert('Cliente atualizado com sucesso!');
                });
            }
            
            // Carregar clientes ao iniciar
            loadClients();
        });
    </script>
</body>
</html>